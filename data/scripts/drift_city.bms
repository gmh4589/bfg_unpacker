# Drift City Online
# script for QuickBMS http://quickbms.aluigi.org

idstring "NayaPack"
get DUMMY long
get DUMMY long
get FILES long

goto 0x20
savepos INFO_OFFSET

filexor "0x01 0x05 0x06 0x02 0x04 0x03 0x07 0x08 0x01 0x05 0x06 0x0f 0x04 0x03 0x07 0x0c 0x31 0x85 0x76 0x39 0x34 0x3d 0x30 0xe8 0x67 0x36 0x36 0x32 0x3e 0x33 0x34 0x3b 0x11 0x15 0x16 0x16 0x14 0x13 0x1d 0x18 0x11 0x03 0x06 0x0c 0x04 0x03 0x06 0x08 0x2e 0x55 0x26 0x23 0x2a 0x23 0x2e 0x28 0x21 0x21 0x26 0x27 0x2e 0x00 0x2d 0x2d 0xcf 0xa5 0x06 0x02 0x04 0x0f 0x07 0x18 0xe1 0x15 0x36 0x18 0x60 0x13 0x1a 0x19 0x11 0x15 0x16 0x10 0x12 0x13 0x17 0x38 0xf1 0x25" 0
append

for i = 0 < FILES
    goto INFO_OFFSET
    get CHUNKS_OFFSET long
    get CHUNKS long
    get SIZE long
    get NAMESZ long
    getdstring NAME NAMESZ
    savepos INFO_OFFSET

    set OFFSET long CHUNKS
    math OFFSET *= 2
    math OFFSET += CHUNKS_OFFSET

    goto CHUNKS_OFFSET
    for j = 0 < CHUNKS
        get ZSIZE short
        clog NAME OFFSET ZSIZE 16384
        math OFFSET += ZSIZE
    next j
next i
