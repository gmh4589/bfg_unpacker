#extract_spk.bms
#Extracts the *.spk sound archives from Splinter Cell: Conviction. Works on both PC and Xbox 360 version. :)

get BNAME basename
string BNAME += "_"
FindLoc DAT string \x02\x23\x00\x08 0 "" # data start (= offset correction)
set FILES DAT
math FILES -= 0x40
math FILES /= 8
goto 0x40
set OFFSET DAT
for i = 1 <= FILES
   get DUMMY long
   get SIZE long
   set NAME BNAME
   string NAME += i
   log NAME OFFSET SIZE
   math OFFSET += SIZE
next i